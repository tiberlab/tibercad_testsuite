
# Description of  the  device physical regions
Device
{
  meshfile = test.msh  
  mesh_units = 1e-9

  material = InGaAs
  x = 0.53
  #x-growth-direction = (1, 1, 0)
  #y-growth-direction = (1, -1, 0)
  #z-growth-direction = (0, 0, 1)

   Region source_region
   {
     Doping {
       type = donor
       Nd = 2e18 
     }
   }

   Region barrier1
   {
     material = GaInP
     x = 0.3           
   #  Doping {
   #    type = donor
   #    Nd = 2e18 
   #  }
    
   }

   Region barrier2
   {
    material = GaInP
    x = 0.3           
   # Doping {
   #    type = donor
   #    Nd = 2e18 
   #  }
   }

   Region drain_region
   {
     Doping {
       type = donor
       Nd = 2e18 
     }
   }

   Region dd_drain_region
   {
     Doping {
       type = donor
       Nd = 2e18 
     }
   }
   
   Region dd_source_region
   {
     Doping {
       type = donor
       Nd = 2e18 
     }
   }

   Region well
   {
  #   Doping {
  #   type = donor
  #   Nd = 2e18 
  #   }
   }

   Cluster double_barrier
   {
    regions=(source_region,barrier1, well, barrier2,drain_region)
   }

   Quantum_contact int_drain
   {
    regions = drain_region
    length = 0.05
   }

   Quantum_contact int_source
   {
    regions = source_region  
    length = 0.05
   }

}


# Definition of  Simulation Models  and associated Boundary Conditions 
Module driftdiffusion
{
  regions=(dd_source_region, source_region,barrier1, well, barrier2,drain_region, dd_drain_region)
  # is default
  # statistics = fermidirac

  # we solve only for electrons
  coupling = electrons

  #save_state = true
  #load_state = outputd10nml50/driftdiffusion_Vd_0.3_Vg_0.4.tsv
  plot = (Ec, Ev, eQFermi, eQFermi, eDensity, hDensity,
          eCurrentDensity, hCurrentDensity, NetRecombination,
          ElField, ElPotential, ContactCurrent)

  Physics
  {
    #recombination
    #{
    #  model = srh
    #}
   particle_density
   { 
   
    statistics =  fermidirac
   
    }

  }

  Contact source
  {
    voltage = 0.0
  }
 
  Contact drain
  {
    voltage = $Vd[0.0]
  }
}



Module sweep
{
  name = sweep_drain 
  solve = (driftdiffusion,negf)
  variable = $Vd
  start = 0.0
  stop = 0.3
  steps = 3 
  plot_data = true
}

Module negf
{
  plot = (Current, elDensity)
  regions = double_barrier

  potential_simulation = driftdiffusion
  Boundary int_source{}
  Boundary int_drain{}

 
  Solver
  {
    #verbosity = 99 
    writeLDOS = 1
    Np_contour = (0,0)
    Np_real = 1000
    Npoles = 0 
    delta = 2e-3
    deltaEc = 0.25
    Emin = -0.30
    Emax = 0.4
    Estep = 0.01
  }

  Physics
  {
    # hamiltonian single_band { } 
     hamiltonian single_band {valley = G}
  }
  
  #k_integration_density
  #{
  # k_max = 0.750
  # number_of_elements = (4,4)
  #}

 k_integration_current
 {
   verbose = 4  
   k_max = 0.5
   number_of_elements = (5,5)
 }


}

#Module efaschroedinger
#{
#  name = quantum_el

#  regions = double_barrier 
  
#  particle = el
#  poisson_model_name = driftdiffusion

#  plot = (EigenFunctions, EigenEnergy, EnergyLevels,ProbabilityDensity,QuantumDensity)

#  Solver
#  {
#    number_of_eigenstates = 4 
#  }	


#  Physics
#  {
#    model = conduction_band

    #model = kp   #  k.p  for  valence  band
    #kp_model = 8x8
#  }

#}


#Module selfconsistent
#{
# solve = (driftdiffusion,negf) 
# max_iteration = 100
# absolute_tollerance = 5e-4
# relative_tollerance = 1e-9
# monitor = true
#} 

# Definition of  model-independent parameters of the Simulation
Simulation
{
  temperature = 300
  #solve = (driftdiffusion,negf) 
  solve = (sweep_drain)
  resultpath = output
  #scratchpath = /work/pecchia/GS
  scratchpath = /scratch/maufder/scratch_NEGF
  output_format = grace 
}














